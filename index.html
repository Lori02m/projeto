<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>App de Despesas</title>
<style>
/* (ESTILOS IGUAIS DO SEU ARQUIVO ORIGINAL — MANTIDOS) */
:root{
 --bg:#f4f6f8;
 --card:#ffffff;
 --primary:#0b6cf0;
 --muted:#6b7280;
 --radius:12px;
 --shadow:0 6px 18px rgba(11,108,240,0.08);
 font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:#111827}
.app{min-height:100vh;display:grid;grid-template-columns:280px 1fr;gap:24px;padding:32px}
.sidebar{background:var(--card);border-radius:var(--radius);padding:20px;box-shadow:var(--shadow)}
.brand{display:flex;align-items:center;gap:10px;margin-bottom:18px}
.logo{width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,var(--primary),#5bc0ff)}
.title{font-weight:700}
.nav{display:flex;flex-direction:column;gap:8px;margin-top:10px}
.nav button{background:transparent;border:0;padding:10px 12px;text-align:left;border-radius:8px;cursor:pointer;font-weight:600;color:#111827}
.nav button.active{background:#f0f6ff;color:var(--primary)}
.main{display:flex;flex-direction:column;gap:20px}
.card{background:var(--card);border-radius:var(--radius);padding:20px;box-shadow:var(--shadow)}
.login-wrapper{max-width:420px;margin:40px auto}
form{display:flex;flex-direction:column;gap:12px}
input{padding:12px 14px;border-radius:10px;border:1px solid #e6e9ee;font-size:15px}
.btn{background:var(--primary);color:white;padding:12px;border-radius:10px;border:0;font-weight:700;cursor:pointer}
.muted{color:var(--muted);font-size:14px}
.header{display:flex;justify-content:space-between;align-items:center}
.welcome{font-size:20px;font-weight:700}
.stats{display:flex;gap:12px}
.stat{background:linear-gradient(180deg,#fff,#fbfcff);padding:12px;border-radius:10px;min-width:140px}
.reward-item{padding:12px;border-radius:10px;background:#f9fafb;margin-bottom:10px;display:flex;justify-content:space-between;align-items:center}
@media (max-width:900px){.app{grid-template-columns:1fr;padding:18px}.sidebar{order:2}}
  /* --- MODO MOBILE IMPROVEMENT --- */
  @media (max-width: 600px){
    .app{
      grid-template-columns: 1fr;
      padding: 12px;
      gap: 12px;
    }
    .sidebar{
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      display: flex;
      flex-direction: row;
      justify-content: space-around;
      padding: 10px;
      border-radius: 0;
    }
    .nav{flex-direction: row; gap: 4px; margin-top: 0;}
    .nav button{
      font-size: 12px;
      padding: 8px;
    }
    .main{
      margin-bottom: 70px;
    }
    .login-wrapper{margin:20px auto; width:90%}
    input{font-size:14px}
  }
</style>
</head>
<body>
<div class="app" id="app">

<!-- SIDEBAR -->
<aside class="sidebar" id="menu">
 <div class="brand">
   <div class="logo"></div>
   <div class="title">App Despesas</div>
 </div>
 <nav class="nav">
   <button onclick="navigate('inicial')">Tela Inicial</button>
   <button onclick="navigate('registrar')">Registrar Despesa</button>
   <button onclick="navigate('guardar')">Guardar Dinheiro</button>
   <button onclick="navigate('recompensas')">Recompensas</button>
   <hr />
   <button onclick="logout()">Sair</button>
 </nav>
</aside>

<!-- MAIN -->
<main class="main">

<!-- LOGIN + CRIAR CONTA -->
<section class="card login-wrapper" id="screen-login">
  <h2>Entrar no App</h2>
  <p class="muted">Faça login ou crie uma conta.</p>

  <form id="login-form" onsubmit="event.preventDefault(); doLogin()">
    <input id="email" type="email" placeholder="E-mail" required />
    <input id="password" type="password" placeholder="Senha" required />
    <button class="btn" type="submit">Entrar</button>
  </form>

  <hr />

  <h3>Criar Conta</h3>
  <form id="register-form" onsubmit="event.preventDefault(); doRegister()">
    <input id="reg-email" type="email" placeholder="E-mail" required />
    <input id="reg-password" type="password" placeholder="Senha" required />
    <button class="btn" type="submit" style="background:#10b981">Criar Conta</button>
  </form>
</section>

<!-- TELA INICIAL -->
<section class="card" id="screen-inicial" style="display:none">
  <div class="header">
    <div>
      <div class="welcome">Bem-vindo(a), <span id="user-name">Visitante</span></div>
      <div class="muted">Resumo rápido das suas finanças</div>
    </div>
    <div class="stats">
      <div class="stat">
        <div class="muted">Total Gasto</div>
        <div id="total-gasto" style="font-weight:800">R$ 0,00</div>
      </div>
      <div class="stat">
        <div class="muted">Pontos</div>
        <div id="user-points" style="font-weight:800">0</div>
      </div>
    </div>
  </div>

  <h3>Despesas Recentes</h3>
  <ul id="lista-despesas"></ul>

  <h3>Dinheiro Guardado</h3>
  <ul id="lista-economias"></ul>
</section>

<!-- REGISTRAR DESPESA -->
<section class="card" id="screen-registrar" style="display:none">
  <h2>Registrar Despesa</h2>
  <form onsubmit="event.preventDefault(); addDespesa()">
    <input id="desp-titulo" type="text" placeholder="Título (ex: Almoço)" required />
    <input id="desp-valor" type="number" step="0.01" placeholder="Valor (R$)" required />
    <input id="desp-cat" type="text" placeholder="Categoria" required />
    <div style="display:flex;gap:8px;margin-top:12px">
      <button class="btn" type="submit">Salvar</button>
      <button type="button" onclick="navigate('inicial')">Cancelar</button>
    </div>
  </form>
</section>

<!-- GUARDAR DINHEIRO -->
<section class="card" id="screen-guardar" style="display:none">
  <h2>Guardar Dinheiro</h2>
  <p class="muted">Você ganha 1 ponto a cada R$ 10 guardados.</p>
  <form onsubmit="event.preventDefault(); addEconomia()">
    <input id="eco-valor" type="number" step="0.01" placeholder="Valor para guardar" required />
    <button class="btn" type="submit">Guardar</button>
  </form>
</section>

<!-- RECOMPENSAS -->
<section class="card" id="screen-recompensas" style="display:none">
  <h2>Recompensas</h2>
  <p class="muted">Use seus pontos para resgatar benefícios.</p>
  <div id="reward-list"></div>
</section>
</main>
</div>

<script>
const state = {
  authenticated:false,
  user:null,
  points:0,
  despesas:[],
  economias:[],
};

const rewards = [
  { id:1, name:"10% de desconto", cost:200 },
  { id:2, name:"Vale-café", cost:100 },
  { id:3, name:"Brinde especial", cost:150 },
];

function updateResumo(){
  const total = state.despesas.reduce((s,d)=>s+d.valor,0);
  document.getElementById("total-gasto").textContent = `R$ ${total.toFixed(2)}`;
  document.getElementById("user-points").textContent = state.points;

  const lista = document.getElementById("lista-despesas");
  lista.innerHTML = state.despesas.map(d => `<li>${d.titulo} - R$ ${d.valor.toFixed(2)}</li>`).join("");

  document.getElementById("lista-economias").innerHTML = state.economias
    .map(e => `<li>Guardou R$ ${e.toFixed(2)}</li>`) 
    .join("");
}

function renderRewards(){
  const container = document.getElementById("reward-list");
  container.innerHTML = "";
  rewards.forEach(r=>{
    const el = document.createElement("div");
    el.className = "reward-item";
    el.innerHTML = `
      <div>
        <strong>${r.name}</strong><br>
        <span class="muted">${r.cost} pontos</span>
      </div>
      <button class="btn" style="padding:6px 10px" onclick="redeem(${r.id})">Resgatar</button>
    `;
    container.appendChild(el);
  });
}

function redeem(id){
  const reward = rewards.find(r => r.id === id);
  if(state.points < reward.cost) return alert("Pontos insuficientes!");
  state.points -= reward.cost;
  updateResumo();
  alert("Recompensa resgatada!");
}

function showScreen(id){
  ["screen-login","screen-inicial","screen-registrar","screen-recompensas","screen-guardar"]
    .forEach(s => document.getElementById(s).style.display = (s === id ? "block" : "none"));
}

function navigate(screen){
  if(!state.authenticated && screen !== "login")
    return showScreen("screen-login");

  if(screen === "recompensas") renderRewards();
  showScreen("screen-" + screen);
  updateResumo();
}

function doLogin(){
  const email = document.getElementById('email').value;
  state.authenticated = true;
  state.user = { name: email.split('@')[0] };
  document.getElementById('user-name').textContent = state.user.name;
  navigate('inicial');
}

function doRegister(){
  const email = document.getElementById('reg-email').value;
  alert("Conta criada com sucesso!");
  document.getElementById('email').value = email;
}

function logout(){
  state.authenticated = false;
  state.user = null;
  state.points = 0;
  state.despesas = [];
  state.economias = [];
  showScreen("screen-login");
}

function addDespesa(){
  const titulo = document.getElementById("desp-titulo").value;
  const valor = parseFloat(document.getElementById("desp-valor").value);
  const cat = document.getElementById("desp-cat").value;

  state.despesas.push({titulo, valor, cat});
  navigate('inicial');
}

function addEconomia(){
  const valor = parseFloat(document.getElementById("eco-valor").value);
  state.economias.push(valor);
  state.points += Math.floor(valor / 10);
  navigate('inicial');
}

showScreen("screen-login");
</script>
</body>
</html>
